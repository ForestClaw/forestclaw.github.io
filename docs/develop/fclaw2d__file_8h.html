<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ForestClaw: fclaw2d_file.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ForestClaw
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fclaw2d_file.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="forestclaw2d_8h_source.html">forestclaw2d.h</a>&gt;</code><br />
<code>#include &lt;p4est_io.h&gt;</code><br />
</div>
<p><a href="fclaw2d__file_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a64d7a175823b5e696bddca215a450479"><td class="memItemLeft" align="right" valign="top"><a id="a64d7a175823b5e696bddca215a450479"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FCLAW2D_FILE_USER_STRING_BYTES</b>&#160;&#160;&#160;P4EST_FILE_USER_STRING_BYTES</td></tr>
<tr class="separator:a64d7a175823b5e696bddca215a450479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af69e39a0c904dab4550363c5aed48e77"><td class="memItemLeft" align="right" valign="top"><a id="af69e39a0c904dab4550363c5aed48e77"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FCLAW2D_FILE_MAX_BLOCK_SIZE</b>&#160;&#160;&#160;P4EST_FILE_MAX_BLOCK_SIZE</td></tr>
<tr class="separator:af69e39a0c904dab4550363c5aed48e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48cd5532fceb89958f53ae54bde42c3a"><td class="memItemLeft" align="right" valign="top"><a id="a48cd5532fceb89958f53ae54bde42c3a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FCLAW2D_FILE_ERR_SUCCESS</b>&#160;&#160;&#160;P4EST_FILE_ERR_SUCCESS</td></tr>
<tr class="separator:a48cd5532fceb89958f53ae54bde42c3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8c338ed0b36d9310e1b5605225a359"><td class="memItemLeft" align="right" valign="top"><a id="a2f8c338ed0b36d9310e1b5605225a359"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FCLAW2D_FILE_ERR_FORMAT</b>&#160;&#160;&#160;P4EST_FILE_ERR_FORMAT</td></tr>
<tr class="separator:a2f8c338ed0b36d9310e1b5605225a359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d5fcdd3483048c8df50899bab21637"><td class="memItemLeft" align="right" valign="top"><a id="aa3d5fcdd3483048c8df50899bab21637"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FCLAW2D_FILE_ERR_NOT_IMPLEMENTED</b>&#160;&#160;&#160;(P4EST_FILE_ERR_LASTCODE + 1)</td></tr>
<tr class="separator:aa3d5fcdd3483048c8df50899bab21637"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a53f48e1ced75f130d6faf7ae545ead0f"><td class="memItemLeft" align="right" valign="top"><a id="a53f48e1ced75f130d6faf7ae545ead0f"></a>
typedef struct fclaw2d_file_context&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a></td></tr>
<tr class="memdesc:a53f48e1ced75f130d6faf7ae545ead0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque context used for writing a fclaw2d data file. <br /></td></tr>
<tr class="separator:a53f48e1ced75f130d6faf7ae545ead0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3517dd2a9754ca06d4f2f63c4e95130"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#ac3517dd2a9754ca06d4f2f63c4e95130">fclaw2d_file_open_write</a> (const char *filename, const char *user_string, <a class="el" href="forestclaw2d_8h.html#a3bd7903f195d89f02036f8fb56706b0d">fclaw2d_domain_t</a> *domain, int *errcode)</td></tr>
<tr class="memdesc:ac3517dd2a9754ca06d4f2f63c4e95130"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and open a file that is associated with the given domain structure.  <a href="fclaw2d__file_8h.html#ac3517dd2a9754ca06d4f2f63c4e95130">More...</a><br /></td></tr>
<tr class="separator:ac3517dd2a9754ca06d4f2f63c4e95130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d3b2d7daed4b2cf4cb220cb3264777"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#a91d3b2d7daed4b2cf4cb220cb3264777">fclaw2d_file_write_block</a> (<a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *fc, const char *user_string, size_t block_size, sc_array_t *block_data, int *errcode)</td></tr>
<tr class="memdesc:a91d3b2d7daed4b2cf4cb220cb3264777"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a serial data block to an opened parallel file.  <a href="fclaw2d__file_8h.html#a91d3b2d7daed4b2cf4cb220cb3264777">More...</a><br /></td></tr>
<tr class="separator:a91d3b2d7daed4b2cf4cb220cb3264777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef8c57c3906499a4f25403d2d3fb8bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#a7ef8c57c3906499a4f25403d2d3fb8bb">fclaw2d_file_write_array</a> (<a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *fc, const char *user_string, size_t patch_size, sc_array_t *patch_data, int *errcode)</td></tr>
<tr class="memdesc:a7ef8c57c3906499a4f25403d2d3fb8bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write per-patch data to a parallel output file.  <a href="fclaw2d__file_8h.html#a7ef8c57c3906499a4f25403d2d3fb8bb">More...</a><br /></td></tr>
<tr class="separator:a7ef8c57c3906499a4f25403d2d3fb8bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a8484da73309213023a57d2a1c967e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#a96a8484da73309213023a57d2a1c967e">fclaw2d_file_open_read</a> (sc_MPI_Comm mpicomm, const char *filename, char *user_string, <a class="el" href="forestclaw2d_8h.html#a3bd7903f195d89f02036f8fb56706b0d">fclaw2d_domain_t</a> **domain, int *errcode)</td></tr>
<tr class="memdesc:a96a8484da73309213023a57d2a1c967e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file for reading and read the stored domain.  <a href="fclaw2d__file_8h.html#a96a8484da73309213023a57d2a1c967e">More...</a><br /></td></tr>
<tr class="separator:a96a8484da73309213023a57d2a1c967e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53676e67f849007f1935473b10fc3ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#aa53676e67f849007f1935473b10fc3ba">fclaw2d_file_read_block</a> (<a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *fc, char *user_string, size_t block_size, sc_array_t *block_data, int *errcode)</td></tr>
<tr class="memdesc:aa53676e67f849007f1935473b10fc3ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a serial data block from an opened file.  <a href="fclaw2d__file_8h.html#aa53676e67f849007f1935473b10fc3ba">More...</a><br /></td></tr>
<tr class="separator:aa53676e67f849007f1935473b10fc3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdcbfcdfd0b39e5d1e409e5144a27211"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#afdcbfcdfd0b39e5d1e409e5144a27211">fclaw2d_file_read_array</a> (<a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *fc, char *user_string, size_t patch_size, sc_array_t *patch_data, int *errcode)</td></tr>
<tr class="memdesc:afdcbfcdfd0b39e5d1e409e5144a27211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read per-patch data from a parallel output file.  <a href="fclaw2d__file_8h.html#afdcbfcdfd0b39e5d1e409e5144a27211">More...</a><br /></td></tr>
<tr class="separator:afdcbfcdfd0b39e5d1e409e5144a27211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0a35f90e900a964d6c5ee1d454c5d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#a4c0a35f90e900a964d6c5ee1d454c5d7">fclaw2d_file_close</a> (<a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *fc, int *errcode)</td></tr>
<tr class="memdesc:a4c0a35f90e900a964d6c5ee1d454c5d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a file opened for parallel write/read and free the context.  <a href="fclaw2d__file_8h.html#a4c0a35f90e900a964d6c5ee1d454c5d7">More...</a><br /></td></tr>
<tr class="separator:a4c0a35f90e900a964d6c5ee1d454c5d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d92f8d8d5d9b39822dea4d55ef9cdbd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a> (int errcode, char *string, int *resultlen)</td></tr>
<tr class="memdesc:a9d92f8d8d5d9b39822dea4d55ef9cdbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn fclaw2d_file errcode into a string.  <a href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">More...</a><br /></td></tr>
<tr class="separator:a9d92f8d8d5d9b39822dea4d55ef9cdbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Routines for parallel IO for <a class="el" href="forestclaw2d_8h.html#a3bd7903f195d89f02036f8fb56706b0d">fclaw2d_domain_t</a> and generic data.</p>
<p>Principle: All files are associated with a single domain, i.e. one can write only one domain to one file. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4c0a35f90e900a964d6c5ee1d454c5d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0a35f90e900a964d6c5ee1d454c5d7">&#9670;&nbsp;</a></span>fclaw2d_file_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fclaw2d_file_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td>
          <td class="paramname"><em>fc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a file opened for parallel write/read and free the context. </p>
<p>This is a collective function.</p>
<p>This function does not abort on MPI I/O errors but returns NULL. Without MPI I/O the function may abort on file system dependent errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fc</td><td>Context previously created by <a class="el" href="fclaw2d__file_8h.html#ac3517dd2a9754ca06d4f2f63c4e95130">fclaw2d_file_open_write</a> or <a class="el" href="fclaw2d__file_8h.html#a96a8484da73309213023a57d2a1c967e">fclaw2d_file_open_read</a>. Is freed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errcode</td><td>An errcode that can be interpreted by <a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for a successful call and -1 in case of an error. See also errcode argument. </dd></dl>

</div>
</div>
<a id="a9d92f8d8d5d9b39822dea4d55ef9cdbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d92f8d8d5d9b39822dea4d55ef9cdbd">&#9670;&nbsp;</a></span>fclaw2d_file_error_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fclaw2d_file_error_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>resultlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn fclaw2d_file errcode into a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">errcode</td><td>An errcode that is output by a fclaw_file function. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">string</td><td>At least sc_MPI_MAX_ERROR_STRING bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resultlen</td><td>Length of string on return. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or something else on invalid arguments. </dd></dl>

</div>
</div>
<a id="a96a8484da73309213023a57d2a1c967e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a8484da73309213023a57d2a1c967e">&#9670;&nbsp;</a></span>fclaw2d_file_open_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>* fclaw2d_file_open_read </td>
          <td>(</td>
          <td class="paramtype">sc_MPI_Comm&#160;</td>
          <td class="paramname"><em>mpicomm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>user_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="forestclaw2d_8h.html#a3bd7903f195d89f02036f8fb56706b0d">fclaw2d_domain_t</a> **&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file for reading and read the stored domain. </p>
<p>The user string is broadcasted to all ranks after reading on rank 0. The file must exist and be at least of the size of the file header.</p>
<p>This is a collective function. If the file has wrong metadata the function reports the error using /ref P4EST_LERRORF, collectively close the file and deallocate the file context. In this case the function returns NULL on all ranks. The wrong file format or a wrong file header causes P4EST_FILE_ERR_FORMAT as errcode.</p>
<p>After calling this function the user can continue reading the opened file by calling <a class="el" href="fclaw2d__file_8h.html#aa53676e67f849007f1935473b10fc3ba">fclaw2d_file_read_block</a>, <a class="el" href="fclaw2d__file_8h.html#afdcbfcdfd0b39e5d1e409e5144a27211">fclaw2d_file_read_array</a> and functions in other files operating on <a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>.</p>
<p>This function does not abort on MPI I/O errors but returns NULL. Without MPI I/O the function may abort on file system dependent errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mpicomm</td><td>MPI communicator that is used to read the file and is used for potential other reading operations of MPI communicator dependent objects. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>The path to the file that is opened. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">user_string</td><td>At least FCLAW2D_FILE_USER_STRING_BYTES bytes. The user string is written to the passed array including padding spaces and a trailing NUL-termination. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">domain</td><td>Newly allocated domain that is read from the file. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errcode</td><td>An errcode that can be interpreted by <a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Newly allocated context to continue reading and eventually closing the file. NULL in case of error. </dd></dl>

</div>
</div>
<a id="ac3517dd2a9754ca06d4f2f63c4e95130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3517dd2a9754ca06d4f2f63c4e95130">&#9670;&nbsp;</a></span>fclaw2d_file_open_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>* fclaw2d_file_open_write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="forestclaw2d_8h.html#a3bd7903f195d89f02036f8fb56706b0d">fclaw2d_domain_t</a> *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and open a file that is associated with the given domain structure. </p>
<p>This is a collective function call that overwrites the file if it exists already. This function writes a header with metadata of the underlying p4est of the passed <b>domain</b> to the file. In addition, the passed <b>domain</b> is written to the file.</p>
<p>The opened file can be used to write to the file using the functions <a class="el" href="fclaw2d__file_8h.html#a91d3b2d7daed4b2cf4cb220cb3264777">fclaw2d_file_write_block</a>, <a class="el" href="fclaw2d__file_8h.html#a7ef8c57c3906499a4f25403d2d3fb8bb">fclaw2d_file_write_array</a> and functions in other files operating on <a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>.</p>
<p>This function does not abort on MPI I/O errors but returns NULL. Without MPI I/O the function may abort on file system dependent errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>Path to parallel file that is to be created. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user_string</td><td>A user string that is written to the file header. Only FCLAW2D_FILE_USER_STRING_BYTES bytes without NUL-termination are written to the file. If the user gives less bytes the user_string in the file header is padded by spaces. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">domain</td><td>The underlying p4est is used for the metadata of the the created file and the <b>domain</b> is written to the file. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errcode</td><td>An errcode that can be interpreted by <a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Newly allocated context to continue writing and eventually closing the file. NULL in case of error. </dd></dl>

</div>
</div>
<a id="afdcbfcdfd0b39e5d1e409e5144a27211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdcbfcdfd0b39e5d1e409e5144a27211">&#9670;&nbsp;</a></span>fclaw2d_file_read_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>* fclaw2d_file_read_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td>
          <td class="paramname"><em>fc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>user_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>patch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sc_array_t *&#160;</td>
          <td class="paramname"><em>patch_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read per-patch data from a parallel output file. </p>
<p>This is a collective function. The function closes and deallocates the file context and returns NULL if the bytes the user wants to read exceed the given file and/or the element size of the array given by <b>patch_data-&gt;elem_size</b> does not coincide with the element size according to the array metadata given in the file.</p>
<p>The data is read in parallel using the partition of the domain (and the underlying p4est) that is associated with the passed file context in the sense that the file context was created using the respective domain. The data size per patch must be fixed.</p>
<p>This function does not abort on MPI I/O errors but returns NULL. Without MPI I/O the function may abort on file system dependent errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fc</td><td>Context previously created by <a class="el" href="fclaw2d__file_8h.html#a96a8484da73309213023a57d2a1c967e">fclaw2d_file_open_read</a>. It keeps track of the data sets read one after another. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">user_string</td><td>At least FCLAW2D_FILE_USER_STRING_BYTES bytes. The user string is written to the passed array including padding spaces and a trailing NUL-termination. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">patch_size</td><td>The number of bytes per patch. This number must coincide with <b>patch_data-&gt;elem_size</b>. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">patch_data</td><td>An array of the length number of local patches with the element size equal to sizeof (sc_array_t). This means each element of <b>patch_data</b> must be a sc_array. These sc_arrays must have an element size of <b>patch_size</b>. This memory layout enables the user to read by indirect addressing, i.e. to read into non-contigous patch data. The patch data is read according to the Morton order of the patches. <b>patch_size</b> must coincide with the section data size in the file. <b>patch_data</b> == NULL means that the data is skipped and the internal file pointer is incremented. In the case of skipping <b>patch_size</b> is still checked using the corresponding value read from the file. The data is read using the partition of patches given by the domain that is associated to <b>fc</b>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errcode</td><td>An errcode that can be interpreted by <a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return a pointer to input context or NULL in case of errors that does not abort the program. In case of error the file is tried to close and <b>fc</b> is freed. </dd></dl>

</div>
</div>
<a id="aa53676e67f849007f1935473b10fc3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53676e67f849007f1935473b10fc3ba">&#9670;&nbsp;</a></span>fclaw2d_file_read_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>* fclaw2d_file_read_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td>
          <td class="paramname"><em>fc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>user_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>block_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sc_array_t *&#160;</td>
          <td class="paramname"><em>block_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a serial data block from an opened file. </p>
<p>This is a collective function.</p>
<p>This function requires an opened file context. The data block and its metadata is read on rank 0.</p>
<p>The passed <b>block_size</b> is compared to the block size stored in the file. If the values do not equal each other, the function reports details closes and deallocate the file context. The return value in this case is NULL. If the data block section header information is not matching the passed parameters the function sets FCLAW2D_FILE_ERR_FORMAT for errcode.</p>
<p>This function does not abort on MPI I/O errors but returns NULL. Without MPI I/O the function may abort on file system dependent errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fc</td><td>Context previously created by <a class="el" href="fclaw2d__file_8h.html#a96a8484da73309213023a57d2a1c967e">fclaw2d_file_open_read</a>. It keeps track of the data sets read one after another. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">user_string</td><td>At least FCLAW2D_FILE_USER_STRING_BYTES bytes. The user string is written to the passed array including padding spaces and a trailing NUL-termination. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_size</td><td>The size of the header that is read. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">block_data</td><td><b>block_size</b> allocated bytes in an sc_array with one element and <b>block_size</b> as element size. This data will be filled with the block data from the file. If this is NULL it means that the current header block is skipped and the internal file pointer of the file context is set to the next data section. If the current data section is not a data block, the file is closed and the file context is deallocated. Furthermore, in this case the function returns NULL and sets errcode to FCLAW2D_FILE_ERR_FORMAT. In case of skipping the data block section <b>block_size</b> needs also to coincide with the data block size given in the file. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errcode</td><td>An errcode that can be interpreted by <a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return a pointer to input context or NULL in case of errors that does not abort the program. In case of error the file is tried to close and <b>fc</b> is freed. </dd></dl>

</div>
</div>
<a id="a7ef8c57c3906499a4f25403d2d3fb8bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ef8c57c3906499a4f25403d2d3fb8bb">&#9670;&nbsp;</a></span>fclaw2d_file_write_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>* fclaw2d_file_write_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td>
          <td class="paramname"><em>fc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>patch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sc_array_t *&#160;</td>
          <td class="paramname"><em>patch_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write per-patch data to a parallel output file. </p>
<p>This is a collective function. This function writes the per-patch data with respect the domain that was passed to the <a class="el" href="fclaw2d__file_8h.html#ac3517dd2a9754ca06d4f2f63c4e95130">fclaw2d_file_open_write</a> for opening the file.</p>
<p>The per-patch data is written in parallel according to the partition of the domain and the underlying p4est, respectively. The data size per patch must be fixed.</p>
<p>This function does not abort on MPI I/O errors but returns NULL. Without MPI I/O the function may abort on file system dependent errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fc</td><td>Context previously created by <a class="el" href="fclaw2d__file_8h.html#ac3517dd2a9754ca06d4f2f63c4e95130">fclaw2d_file_open_write</a>. It keeps track of the data sets written one after another. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user_string</td><td>A user string that is written to the file. Only FCLAW2D_FILE_USER_STRING_BYTES bytes without NUL-termination are written to the file. If the user gives less bytes the user_string in the file header is padded by spaces. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">patch_size</td><td>The number of bytes per patch. This number must coincide with <b>patch_data-&gt;elem_size</b>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">patch_data</td><td>An array of the length number of local patches with the element size equal to sizeof (sc_array_t). This means each element of <b>patch_data</b> must be a sc_array. These sc_arrays must have an element size of <b>patch_size</b> and store the actual patch data. This memory layout enables the user to write by indirect addressing, i.e. to write non-contigous patch data. The patch data is expected to be stored according to the Morton order of the patches. For <b>patch_size</b> == 0 the function writes an empty array. The section header and the padding is still written. In this case errcode is set to FCLAW2D_FILE_ERR_SUCCESS. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errcode</td><td>An errcode that can be interpreted by <a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return a pointer to input context or NULL in case of errors that does not abort the program. In case of error the file is tried to close and <b>fc</b> is freed. </dd></dl>

</div>
</div>
<a id="a91d3b2d7daed4b2cf4cb220cb3264777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91d3b2d7daed4b2cf4cb220cb3264777">&#9670;&nbsp;</a></span>fclaw2d_file_write_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a>* fclaw2d_file_write_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fclaw2d__file_8h.html#a53f48e1ced75f130d6faf7ae545ead0f">fclaw2d_file_context_t</a> *&#160;</td>
          <td class="paramname"><em>fc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>block_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sc_array_t *&#160;</td>
          <td class="paramname"><em>block_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a serial data block to an opened parallel file. </p>
<p>This is a collective function. This function writes a serial data block to the opened file.</p>
<p>The block data and its metadata is written on rank 0. The number of block bytes must be less or equal FCLAW2D_FILE_MAX_BLOCK_SIZE.</p>
<p>This function does not abort on MPI I/O errors but returns NULL. Without MPI I/O the function may abort on file system dependent errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fc</td><td>Context previously created by <a class="el" href="fclaw2d__file_8h.html#ac3517dd2a9754ca06d4f2f63c4e95130">fclaw2d_file_open_write</a>. It keeps track of the data sets written one after another. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user_string</td><td>A user string that is written to the file. Only FCLAW2D_FILE_USER_STRING_BYTES bytes without NUL-termination are written to the file. If the user gives less bytes the user_string in the file header is padded by spaces. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_size</td><td>The size of the block in bytes. May be equal to 0. In this case the section header and the padding is still written. This function returns the passed <b>fc</b> parameter and sets errcode to FCLAW2D_FILE_ERR_SUCCESS if it is called for <b>block_size</b> == 0. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_data</td><td>A sc_array with one element and element size equal to <b>block_size</b>. The array points to the block data. The user is responsible for the validality of the block data. block_data can be NULL if <b>block_size</b> == 0. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errcode</td><td>An errcode that can be interpreted by <a class="el" href="fclaw2d__file_8h.html#a9d92f8d8d5d9b39822dea4d55ef9cdbd">fclaw2d_file_error_string</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return a pointer to input context or NULL in case of errors that does not abort the program. In case of error the file is tried to close and <b>fc</b> is freed. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
